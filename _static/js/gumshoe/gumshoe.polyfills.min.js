/*! gumshoejs v5.1.1+patch | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/gumshoe */
Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t}while(null!==(t=t.parentElement));return null}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):e.Gumshoe=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(u){"use strict";function f(e,t,n){n.settings.events&&(n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n}),t.dispatchEvent(n))}function n(e){var t=0;if(e.offsetParent)for(;e;)t+=e.offsetTop,e=e.offsetParent;return 0<=t?t:0}function d(e){e&&e.sort(function(e,t){return n(e.content)<n(t.content)?-1:1})}function i(e,t,n){return e=e.getBoundingClientRect(),t="function"==typeof(t=t).offset?parseFloat(t.offset()):parseFloat(t.offset),n?parseInt(e.bottom,10)<(u.innerHeight||document.documentElement.clientHeight):parseInt(e.top,10)<=t}function r(){return u.innerHeight+u.pageYOffset>=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}function m(e,t){var n,o,s=e[e.length-1];if(n=s,o=t,!!(r()&&n&&i(n.content,o,!0)))return s;for(var c=e.length-1;0<=c;c--)if(i(e[c].content,t))return e[c]}function p(e,t){var n;!e||(n=e.nav.closest("li"))&&(n.classList.remove(t.navClass),e.content.classList.remove(t.contentClass),o(n,t),f("gumshoeDeactivate",n,{link:e.nav,content:e.content,settings:t}))}var v={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},o=function(e,t){t.nested&&e.parentNode&&((e=e.parentNode.closest("li"))&&(e.classList.remove(t.nestedClass),o(e,t)))},h=function(e,t){!t.nested||(e=e.parentNode.closest("li"))&&(e.classList.add(t.nestedClass),h(e,t))};return function(e,t){var n,s,c,o,i,r={setup:function(){n=document.querySelectorAll(e),s=[],Array.prototype.forEach.call(n,function(e){var t=document.getElementById(decodeURIComponent(e.hash.substr(1)));t&&s.push({nav:e,content:t})}),d(s)}};r.detect=function(){var e,t,n,o=m(s,i);o?c&&o.content===c.content||(p(c,i),t=i,!(e=o)||(n=e.nav.closest("li"))&&(n.classList.add(t.navClass),e.content.classList.add(t.contentClass),h(n,t),f("gumshoeActivate",n,{link:e.nav,content:e.content,settings:t})),c=o):c&&(p(c,i),c=null)};function a(e){o&&u.cancelAnimationFrame(o),o=u.requestAnimationFrame(r.detect)}function l(e){o&&u.cancelAnimationFrame(o),o=u.requestAnimationFrame(function(){d(s),r.detect()})}r.destroy=function(){c&&p(c,i),u.removeEventListener("scroll",a,!1),i.reflow&&u.removeEventListener("resize",l,!1),i=o=c=n=s=null};return i=function(){var n={};return Array.prototype.forEach.call(arguments,function(e){for(var t in e){if(!e.hasOwnProperty(t))return;n[t]=e[t]}}),n}(v,t||{}),r.setup(),r.detect(),u.addEventListener("scroll",a,!1),i.reflow&&u.addEventListener("resize",l,!1),r}});